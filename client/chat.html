<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Chatify</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        dark: '#050505',
                        surface: '#0a0a0a',
                        border: '#1a1a1a'
                    },
                    animation: {
                        'fade-up': 'fadeUp 0.5s ease-out forwards',
                        'fade-in': 'fadeIn 0.3s ease-out forwards',
                    },
                    keyframes: {
                        fadeUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Custom Scrollbar for Webkit */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(156, 163, 175, 0.2); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(156, 163, 175, 0.4); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-white dark:bg-dark text-slate-900 dark:text-white overflow-hidden h-screen w-screen flex transition-colors duration-300">

    <!-- SIDEBAR -->
    <aside class="w-80 h-full bg-slate-50 dark:bg-surface border-r border-slate-200 dark:border-white/5 flex flex-col shrink-0 z-20">
        <!-- Header -->
        <div class="h-16 flex items-center px-6 border-b border-slate-200 dark:border-white/5">
            <div class="flex items-center gap-3 cursor-pointer" onclick="window.location.href='/'">
                <div class="w-8 h-8 bg-black dark:bg-white rounded-lg flex items-center justify-center">
                    <i data-lucide="message-square" class="w-4 h-4 text-white dark:text-black"></i>
                </div>
                <span class="font-bold text-lg tracking-tight">Chatify</span>
            </div>
        </div>

        <!-- Lists -->
        <div class="flex-1 overflow-y-auto p-4 space-y-8">
            <!-- Navigation -->
            <div class="space-y-2">
                <div class="px-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Menu</div>
                <div onclick="Chat.load('getting-started')" class="flex items-center gap-3 px-3 py-2 rounded-xl text-sm font-medium hover:bg-white dark:hover:bg-white/5 cursor-pointer transition-colors text-slate-600 dark:text-slate-400 hover:text-black dark:hover:text-white">
                    <i data-lucide="compass" class="w-4 h-4"></i> Overview
                </div>
                <div onclick="window.location.href='/settings.html'" class="flex items-center gap-3 px-3 py-2 rounded-xl text-sm font-medium hover:bg-white dark:hover:bg-white/5 cursor-pointer transition-colors text-slate-600 dark:text-slate-400 hover:text-black dark:hover:text-white">
                    <i data-lucide="settings" class="w-4 h-4"></i> Settings
                </div>
            </div>

            <!-- Channels -->
            <div class="space-y-2">
                <div class="flex items-center justify-between px-2">
                    <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Channels</span>
                </div>
                <div id="channel-list" class="space-y-1">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- Direct Messages -->
            <div class="space-y-2">
                <div class="flex items-center justify-between px-2">
                    <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">People</span>
                    <span class="text-[10px] font-bold text-green-500" id="online-count">0</span>
                </div>
                <div id="user-list" class="space-y-1">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>

        <!-- User Profile (Bottom) -->
        <div class="p-4 border-t border-slate-200 dark:border-white/5">
            <div class="flex items-center gap-3 p-2 rounded-xl hover:bg-white dark:hover:bg-white/5 cursor-pointer transition-colors" onclick="window.location.href='/settings.html'">
                <img id="my-avatar" src="" class="w-9 h-9 rounded-full bg-slate-200 object-cover">
                <div class="flex-1 min-w-0">
                    <span id="my-name" class="block text-xs font-bold truncate">Guest</span>
                    <span class="block text-[10px] text-slate-500">Online</span>
                </div>
                <i data-lucide="more-horizontal" class="w-4 h-4 text-slate-400"></i>
            </div>
        </div>
    </aside>

    <!-- MAIN CHAT AREA -->
    <main class="flex-1 flex flex-col min-w-0 bg-white dark:bg-dark relative">
        
        <!-- Header -->
        <header class="h-16 flex items-center justify-between px-6 border-b border-slate-100 dark:border-white/5 shrink-0 bg-white/80 dark:bg-dark/80 backdrop-blur-md z-10">
            <div class="flex items-center gap-4">
                <div class="flex flex-col">
                    <h2 id="room-name" class="text-base font-bold text-slate-900 dark:text-white">Overview</h2>
                    <span id="channel-info" class="text-xs text-slate-500">Workspace Hub</span>
                </div>
            </div>
            
            <div class="flex items-center gap-2">
                <button onclick="App.toggleTheme()" class="p-2.5 rounded-xl hover:bg-slate-100 dark:hover:bg-white/5 text-slate-400 transition-colors">
                    <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                    <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i>
                </button>
            </div>
        </header>

        <!-- Messages Feed -->
        <div id="messages-feed" class="flex-1 overflow-y-auto p-6 scroll-smooth">
            <!-- Messages injected here -->
        </div>

        <!-- Input Area -->
        <div id="input-area" class="p-6 pt-0 hidden animate-fade-up">
            <div class="max-w-4xl mx-auto relative group">
                <div id="reply-preview" class="hidden mb-2"></div>
                
                <div class="bg-slate-50 dark:bg-surface border border-slate-200 dark:border-white/10 rounded-3xl p-2 flex items-end shadow-sm focus-within:ring-2 ring-black/5 dark:ring-white/10 transition-all">
                    <button class="p-3 text-slate-400 hover:text-black dark:hover:text-white transition-colors" onclick="document.getElementById('file-upload').click()">
                        <i data-lucide="plus" class="w-5 h-5"></i>
                    </button>
                    <input type="file" id="file-upload" class="hidden">
                    
                    <textarea id="msg-input" rows="1" placeholder="Type a message..." class="flex-1 bg-transparent border-none outline-none text-sm py-3 px-2 max-h-32 resize-none text-slate-900 dark:text-white placeholder:text-slate-400"></textarea>
                    
                    <button onclick="Chat.send()" class="p-2 bg-black dark:bg-white rounded-full text-white dark:text-black hover:scale-105 transition-transform shadow-lg m-1">
                        <i data-lucide="arrow-up" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>

    </main>

    <script type="module" src="js/main.js"></script>
    <script>
        // Init Icons
        setTimeout(() => lucide.createIcons(), 100);
    </script>
</body>
</html>